<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Examen Vocacional de Medicina - Todo en Uno</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* Estilos Médico Profesional Serio y Llamativo */

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #EBF2F8; /* Azul muy claro, casi blanco */
            color: #333;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* ------------------- ENCABEZADO Y NAVEGACIÓN ------------------- */

        .header {
            background-color: #004D80; /* Azul Marino Profundo (Serio) */
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        h1 {
            font-size: 2.2em;
            margin: 0 0 10px 0;
        }

        /* Botones de Navegación */
        .nav-button {
            display: inline-block;
            padding: 8px 16px;
            margin: 3px;
            background-color: #00B29E; /* Verde Quirúrgico (Llamativo pero Serio) */
            color: #004D80; /* Texto en Azul Marino */
            text-decoration: none;
            border-radius: 4px;
            font-weight: 700;
            transition: background-color 0.3s, transform 0.2s;
            font-size: 0.9em;
            border: 2px solid #00B29E;
        }

        .nav-button:hover {
            background-color: #008C78;
            transform: translateY(-2px);
            color: white;
        }

        .container {
            max-width: 1000px;
            margin: 30px auto;
            padding: 20px;
        }

        /* ------------------- SECCIONES Y FORMATO ------------------- */

        .section {
            padding: 40px;
            margin-bottom: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            scroll-margin-top: 120px;
        }

        /* Colores de Fondo llamativos pero clínicos */
        .bienvenida-bg { 
            background-color: #FFFFFF; 
            border-left: 8px solid #004D80; 
            box-shadow: 0 0 20px rgba(0, 77, 128, 0.1);
        }
        .cuestionario-bg { 
            background-color: #FFFFFF; 
            border-top: 4px solid #E4E7EB; 
        }
        .resultado-bg { 
            background-color: #F0FCF9;
            border-left: 8px solid #00B29E; 
        }

        .tema-principal {
            color: #004D80; /* Azul Marino */
            border-bottom: 3px solid #FFC300; /* Línea de acento Dorado/Amarillo Mostaza */
            padding-bottom: 10px;
            margin-bottom: 30px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .frase-medicina {
            font-style: italic;
            color: #555;
            border-left: 4px solid #00B29E;
            padding-left: 15px;
        }

        /* ------------------- FORMULARIOS Y PREGUNTAS ------------------- */

        input[type="text"], select, input[type="number"], textarea {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 1.05em;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input[type="text"]:focus, select:focus, textarea:focus {
            border-color: #004D80;
            box-shadow: 0 0 5px rgba(0, 77, 128, 0.5);
            outline: none;
        }

        .pregunta-box {
            border: 1px solid #E4E7EB;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 10px;
            background-color: #F8FBFD;
        }

        legend {
            font-weight: bold;
            color: #004D80;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        /* ------------------- BOTÓN FINALIZAR ------------------- */

        .boton-finalizar {
            background-color: #FF5733; /* Rojo Terciario (llamativo y de acción) */
            color: white;
            padding: 18px 35px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: bold;
            margin-top: 30px;
            width: 100%;
            transition: background-color 0.3s, transform 0.2s;
        }

        .boton-finalizar:hover {
            background-color: #E54B2D;
            transform: scale(1.01);
        }

        /* ------------------- ESTILOS DE IMAGEN (ADAPTABLE) ------------------- */

        .imagen-container {
            text-align: center; 
            margin: 30px 0 10px 0;
            padding: 25px;
            background-color: #F0F9FF;
            border-radius: 10px;
            border: 1px dashed #A3C1D4;
        }

        .img-formulario {
            max-width: 45%;
            height: auto;
            display: block;
            margin: 0 auto;
            border-radius: 8px; 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); 
            transition: transform 0.4s ease-in-out;
        }

        .img-formulario:hover {
            transform: scale(1.02);
        }

        @media (max-width: 600px) {
            .img-formulario {
                max-width: 70%; 
            }
        }

        /* ------------------- RESULTADOS Y PUNTUACIÓN ------------------- */

        .score-box {
            background-color: #FFFFFF;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 25px 0;
            border: 3px solid #FFC300;
        }

        .score-value {
            font-size: 4em;
            font-weight: 700;
            color: #004D80;
            display: block;
            line-height: 1.1;
        }

        .motivacion {
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
            font-size: 1.1em;
            font-weight: 600;
        }

        /* Códigos de colores serios y llamativos para los mensajes */
        .motivacion.alto { background-color: #D6F1EE; color: #008C78; border: 1px solid #00B29E; }
        .motivacion.medio { background-color: #FFF8E1; color: #CC9900; border: 1px solid #FFC300; }
        .motivacion.bajo { background-color: #FDE8E8; color: #CC0000; border: 1px solid #FF5733; }
    </style>
    </head>
<body>

    <header class="header">
        <h1>Tu Viaje a la Medicina 🧬</h1>
        
        {% if not mostrar_resultado %}
        <nav id="nav-secciones">
            <a href="#inicio" class="nav-button">Inicio</a>
            <a href="#vocacion" class="nav-button">Vocación</a>
            <a href="#valores" class="nav-button">Ética</a>
            <a href="#rasgos" class="nav-button">Rasgos</a>
            <a href="#hipoteticas" class="nav-button">Hipotéticas</a>
            <a href="#proyecto" class="nav-button">Proyecto</a>
        </nav>
        {% endif %}
    </header>

    <main class="container">

        {% if mostrar_resultado %}
        
            <section id="resultado" class="section resultado-bg">
                <h2 class="tema-principal">¡Tu Vocación ha sido Evaluada! 🎉</h2>
                <div id="mensaje-resultado">
                    <h3>Felicidades, **{{ prefijo }} {{ nombre }}**</h3>
                    <p class="frase-medicina">
                        Has demostrado compromiso con tu futura carrera de **{{ carrera }}**.
                    </p>
                    
                    <div class="score-box">
                        <p>Puntuación Total Obtenida:</p>
                        <span class="score-value">{{ score }} / {{ max_score }}</span>
                    </div>
                    
                    {% set porcentaje = (score / max_score) %}
                    
                    {% if porcentaje >= 0.8 %}
                        <p class="motivacion alto">**¡Excelente Aptitud!** Tu vocación y valores son sobresalientes. Estás listo/a para el desafío. El campo de la salud te espera.</p>
                    {% elif porcentaje >= 0.5 %}
                        <p class="motivacion medio">**Base Sólida.** Tienes buen potencial. Recuerda fortalecer tu conocimiento ético y tu resiliencia. ¡Sigue adelante!</p>
                    {% else %}
                        <p class="motivacion bajo">**Áreas de Oportunidad.** La Medicina exige profunda ética y compromiso. Te recomendamos reflexionar si esta es tu verdadera vocación. ¡No te rindas, pero evalúa tu motivación a fondo!</p>
                    {% endif %}
                </div>
                <a href="{{ url_for('home') }}" class="nav-button">Volver al Inicio y Repetir Evaluación</a>
            </section>

        {% else %}
            
            <form method="POST" action="/">
                
                <section id="inicio" class="section bienvenida-bg">
                    <h2>¡Bienvenido/a, Futuro Sanador! 🌟</h2>
                    <p class="frase-medicina">"La verdadera prueba de un médico no es su conocimiento, sino la **empatía** con la que lo aplica."</p>
                    
                    <div id="login-form">
                        <p>Comienza tu evaluación de aptitud vocacional:</p>
                        <input type="text" name="nombre_usuario" placeholder="Tu Nombre Completo" required>
                        <select name="carrera_deseada" required>
                            <option value="">Selecciona la Rama de Medicina Deseada</option>
                            <option value="Médico Cirujano">Médico Cirujano General</option>
                            <option value="Enfermería">Enfermería Clínica</option>
                            <option value="Odontología">Odontología Preventiva</option>
                            <option value="Investigación Biomédica">Investigación Biomédica</option>
                        </select>
                    </div>
                    <p class="guia">Completa todas las secciones. Puedes usar los botones de navegación para guiarte. 👇</p>
                    
                    <div class="imagen-container">
                        <img src="{{ url_for('static', filename='assets/ilustracion_medica.png') }}" alt="Ilustración de Vocación Médica" class="img-formulario">
                    </div>
                </section>

                <section id="vocacion" class="section cuestionario-bg">
                    <h2 class="tema-principal">1. Vocación y Motivación</h2>
                    
                    <fieldset class="pregunta-box">
                        <legend>P1. ¿Qué te atrae más de la Medicina?</legend>
                        <label><input type="radio" name="q1" value="a" required> (a) El estatus y reconocimiento.</label>
                        <label><input type="radio" name="q1" value="b"> (b) La complejidad científica y la investigación.</label>
                        <label><input type="radio" name="q1" value="c"> (c) La oportunidad de aliviar el sufrimiento humano y servir a la comunidad.</label>
                    </fieldset>
                    
                    <fieldset class="pregunta-box">
                        <legend>P2. Un paciente grave fallece tras tu mejor esfuerzo. ¿Cómo reaccionas?</legend>
                        <label><input type="radio" name="q2" value="a" required> (a) Siento frustración intensa y dudo de mi capacidad.</label>
                        <label><input type="radio" name="q2" value="b"> (b) Reflexiono sobre el caso, proceso la pérdida y sigo adelante aprendiendo.</label>
                        <label><input type="radio" name="q2" value="c"> (c) Lo olvido rápidamente para evitar el desgaste emocional.</label>
                    </fieldset>
                    
                    <fieldset class="pregunta-box">
                        <legend>P3. En una escala del 1 (Nada) al 5 (Totalmente), ¿cuán dispuesto estás a sacrificar fines de semana y horas de sueño por esta carrera?</legend>
                        <input type="number" name="q3" min="1" max="5" required>
                    </fieldset>
                    
                    <fieldset class="pregunta-box">
                        <legend>P4. ¿Con qué prefieres lidiar principalmente en tu día a día?</legend>
                        <label><input type="radio" name="q4" value="a" required> (a) Investigar solo en un laboratorio.</label>
                        <label><input type="radio" name="q4" value="b"> (b) Interactuar y colaborar activamente con un equipo multidisciplinario.</label>
                    </fieldset>
                    
                    <fieldset class="pregunta-box">
                        <legend>P5. Si cometes un error grave, ¿estás dispuesto a reconocerlo, asumirlo y aprender de él?</legend>
                        <label><input type="radio" name="q5" value="Si" required> Sí, la honestidad es lo primero.</label>
                        <label><input type="radio" name="q5" value="No"> No, intentaría ocultarlo para proteger mi carrera.</label>
                    </fieldset>
                    
                    <fieldset class="pregunta-box">
                        <legend>P6. ¿Te sientes cómodo/a trabajando en situaciones de alta presión, trauma y con fluidos corporales?</legend>
                        <label><input type="radio" name="q6" value="Si" required> Sí, lo considero parte esencial del trabajo.</label>
                        <label><input type="radio" name="q6" value="No"> No, prefiero un entorno de oficina o laboratorio.</label>
                    </fieldset>
                </section>

                <section id="valores" class="section cuestionario-bg">
                    <h2 class="tema-principal">2. Valores y Ética</h2>
                    
                    <fieldset class="pregunta-box">
                        <legend>P1. Un paciente terminal rechaza un tratamiento vital por motivos personales. ¿Qué harías?</legend>
                        <label><input type="radio" name="q_val_1" value="a" required> (a) Insistir y convencerlo con argumentos científicos, sin ceder.</label>
                        <label><input type="radio" name="q_val_1" value="b"> (b) Respetar su autonomía, asegurando que su decisión sea informada y ofreciendo soporte paliativo.</label>
                        <label><input type="radio" name="q_val_1" value="c"> (c) Pedir a su familia que intervenga y lo obligue.</label>
                    </fieldset>
                    
                    <fieldset class="pregunta-box">
                        <legend>P2. Ves a un colega cometer un error que puede ser encubierto. ¿Cómo actúas?</legend>
                        <label><input type="radio" name="q_val_2" value="a" required> (a) Lo cubro; la lealtad al colega es primero.</label>
                        <label><input type="radio" name="q_val_2" value="b"> (b) Lo denuncio anónimamente a la dirección.</label>
                        <label><input type="radio" name="q_val_2" value="c"> (c) Abordo al colega en privado para que corrija su error o lo reporte de manera apropiada.</label>
                    </fieldset>
                    
                    <fieldset class="pregunta-box">
                        <legend>P3. ¿Qué valor consideras el más crucial en la relación médico-paciente?</legend>
                        <label><input type="radio" name="q_val_3" value="a" required> (a) Competencia técnica.</label>
                        <label><input type="radio" name="q_val_3" value="b"> (b) Secreto profesional.</label>
                        <label><input type="radio" name="q_val_3" value="c"> (c) Empatía y respeto mutuo.</label>
                    </fieldset>
                </section>
                
                <section id="rasgos" class="section cuestionario-bg">
                    <h2 class="tema-principal">3. Rasgos Personales</h2>
                    
                    <fieldset class="pregunta-box">
                        <legend>P1. Tu nivel de organización para el estudio y el manejo de múltiples tareas es (1-Caótico, 5-Metódico y excelente):</legend>
                        <input type="number" name="rasgo_org" min="1" max="5" required>
                    </fieldset>
                    
                    <fieldset class="pregunta-box">
                        <legend>P2. ¿Cómo manejas las críticas o la retroalimentación negativa sobre tu desempeño?</legend>
                        <label><input type="radio" name="rasgo_critica" value="a" required> (a) Me desmotiva o me pongo a la defensiva.</label>
                        <label><input type="radio" name="rasgo_critica" value="b"> (b) Lo tomo como una oportunidad de mejora inmediata.</label>
                    </fieldset>
                </section>

                <section id="hipoteticas" class="section cuestionario-bg">
                    <h2 class="tema-principal">4. Situaciones Hipotéticas</h2>
                    
                    <fieldset class="pregunta-box">
                        <legend>P1. Estás solo/a en Triage (urgencias). Llegan tres pacientes simultáneamente: A) Niño con fractura simple. B) Anciano con dolor de pecho severo. C) Persona con herida menor en la cabeza. ¿A quién atiendes primero (Triage)?</legend>
                        <select name="hipo_triage" required>
                            <option value="">Selecciona tu prioridad</option>
                            <option value="A">A) Niño con fractura simple.</option>
                            <option value="B">B) Anciano con dolor de pecho severo (posible infarto).</option>
                            <option value="C">C) Persona con herida menor en la cabeza.</option>
                        </select>
                    </fieldset>
                </section>

                <section id="proyecto" class="section cuestionario-bg">
                    <h2 class="tema-principal">5. Proyecto de Vida</h2>
                    <p>Describe en detalle dónde te ves profesionalmente dentro de 10 años y cómo planeas equilibrar tu vida personal con la demanda de la carrera médica. (Se recomienda una respuesta de **mínimo 30 palabras**).</p>
                    <textarea name="proyecto_vida" rows="8" placeholder="Escribe aquí tu proyecto de vida (visión, valores, equilibrio)..." required></textarea>
                    
                    <button type="submit" class="boton-finalizar">Finalizar Examen y Ver Puntuación</button>
                </section>
            </form>
        
        {% endif %}

    </main>
    
    <footer>
        <p>© 2025 Vocación al Servicio | Desarrollo con Flask y amor por la Medicina.</p>
    </footer>
</body>
</html>